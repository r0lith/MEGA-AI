let handler = async (m, { conn, participants, groupMetadata }) => {
    try {
      console.log('Handler triggered');
      console.log('Participants:', participants);
      console.log('Group Metadata:', groupMetadata);
  
      const groupAdmins = participants.filter(p => p.admin);
      console.log('Group Admins:', groupAdmins);
  
      let text = `
  â‰¡ *FLAGGED MESSAGE IN GROUP* _${groupMetadata.subject}_
  
  New message has been flagged!
  `.trim();
  
      console.log('Text to send:', text);
  
      if (m.quoted) {
        console.log('Quoted message:', m.quoted);
        await conn.sendMessage(m.chat, { text }, { quoted: m.quoted });
        console.log('Message sent');
      } else {
        console.log('No quoted message found');
      }
    } catch (error) {
      console.error('Error in flag handler:', error);
    }
  };
  
  handler.help = ['flag'];
  handler.tags = ['group'];
  handler.command = /^(flag)$/i;
  handler.group = true;
  
  export default handler;